<!DOCTYPE html>
<html
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{modules/layout :: html(headtitle = |${title} - ${site.title}|, content = ~{::content})}"
>
  <th:block th:fragment="content">
    <div class="primary">
      <div class="moments_menu">
        <ul>
          <li th:classappend="${#lists.isEmpty(param.tag) ? 'active' : ''}">
            <a href="/moments"> 全部 </a>
          </li>
          <li th:each="tag : ${tags}" th:classappend="${#lists.contains(param.tag, tag.name) ? 'active' : ''}">
            <a th:href="|?tag=${tag.name}|">
              <span th:text="${tag.name}"></span>
              <span class="flag" th:text="${tag.momentCount}"></span>
            </a>
          </li>
        </ul>
      </div>
      <div class="moments_content">
        <ul role="list">
          <th:block th:each="moment : ${moments.items}">
            <li>
              <img class="avatar" th:src="${moment.owner.avatar}" th:alt="${moment.owner.displayName}" />
              <div class="moments_html">
                <div th:utext="${moment.spec.content.html}"></div>
                <th:block th:unless="${#lists.isEmpty(moment.spec.content.medium)}">
                  <div th:id="${moment.metadata.name}" class="main_medium">
                    <div th:each="media : ${moment.spec.content.medium}">
                      <img
                        th:data-src="${media.url}"
                        th:data-parent-node="${moment.metadata.name}"
                        th:onclick="'showImage(this)'"
                        th:if="${#strings.equals(media.type,'PHOTO')}"
                        th:src="${media.url}"
                        loading="lazy"
                      />
                      <div th:if="${#strings.equals(media.type,'VIDEO')}">
                        <video preload="metadata" th:src="${media.url}"></video>
                        <div class="icon_controls" th:data-video-src="${media.url}" th:onclick="'showVideo(this)'">
                          <svg
                            t="1705390629360"
                            class="icon"
                            viewBox="0 0 1024 1024"
                            version="1.1"
                            xmlns="http://www.w3.org/2000/svg"
                            p-id="2427"
                            width="32"
                            height="32"
                          >
                            <path
                              d="M675.328 117.717333A425.429333 425.429333 0 0 0 512 85.333333C276.352 85.333333 85.333333 276.352 85.333333 512s191.018667 426.666667 426.666667 426.666667 426.666667-191.018667 426.666667-426.666667c0-56.746667-11.093333-112-32.384-163.328a21.333333 21.333333 0 0 0-39.402667 16.341333A382.762667 382.762667 0 0 1 896 512c0 212.074667-171.925333 384-384 384S128 724.074667 128 512 299.925333 128 512 128c51.114667 0 100.8 9.984 146.986667 29.12a21.333333 21.333333 0 0 0 16.341333-39.402667zM456.704 305.92C432.704 289.152 405.333333 303.082667 405.333333 331.797333v360.533334c0 28.586667 27.541333 42.538667 51.370667 25.856l252.352-176.768c21.76-15.253333 21.632-43.541333 0-58.709334l-252.373333-176.768z m-8.597333 366.72V351.466667l229.269333 160.597333-229.269333 160.597333z"
                              fill="#ffffff"
                              p-id="2428"
                            ></path>
                          </svg>
                        </div>
                      </div>
                    </div>
                  </div>
                </th:block>
                <div class="tool-bar">
                  <!-- <div>
                    <svg t="1704876894395" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5303"
                      id="mx_n_1704876894396" width="16" height="16">
                      <path
                        d="M512 901.746939c-13.583673 0-26.122449-4.179592-37.093878-13.061225-8.881633-7.314286-225.697959-175.020408-312.424489-311.379592C133.746939 532.37551 94.040816 471.24898 94.040816 384.522449c0-144.718367 108.146939-262.269388 240.326531-262.269388 67.395918 0 131.657143 30.82449 177.632653 84.636735 45.453061-54.334694 109.191837-84.636735 177.110204-84.636735 132.702041 0 240.326531 117.55102 240.326531 262.269388 0 85.159184-37.093878 143.673469-67.395919 191.216327l-1.044898 1.567346c-86.726531 136.359184-303.542857 304.587755-312.424489 311.379592-10.44898 8.359184-22.987755 13.061224-36.571429 13.061225zM334.367347 164.04898c-109.714286 0-198.530612 98.742857-198.530612 220.473469 0 74.187755 33.959184 127.477551 61.648979 170.318367 83.069388 130.089796 294.138776 294.138776 303.020408 300.930613 3.657143 2.612245 7.314286 4.179592 11.493878 4.179591s7.836735-1.567347 11.493878-4.179591c8.881633-6.791837 219.95102-170.840816 303.020408-300.930613l1.044898-1.567347c28.212245-44.930612 60.604082-95.608163 60.604081-168.75102 0-121.208163-89.338776-220.473469-198.530612-220.473469-60.081633 0-115.983673 29.257143-153.6 80.979591l-6.269388 8.881633c-4.179592 5.22449-10.44898 8.359184-16.718367 8.359184s-13.061224-3.134694-16.718367-8.359184l-6.269388-8.881633C450.35102 193.828571 393.926531 164.04898 334.367347 164.04898z"
                        fill="#bfbfbf" p-id="5304"></path>
                    </svg>
                    <span th:attr="data-upvote-moment-name=${moment.metadata.name}" th:text="${moment.stats.upvote}"></span>
                  </div> -->
                  <div
                    style="cursor: pointer"
                    th:onclick="'showComment(this)'"
                    th:data-comment-id="'comment_'+${moment.metadata.name}"
                  >
                    <svg
                      t="1704876976156"
                      class="icon"
                      viewBox="0 0 1024 1024"
                      version="1.1"
                      xmlns="http://www.w3.org/2000/svg"
                      p-id="6431"
                      width="16"
                      height="16"
                    >
                      <path
                        d="M853.333333 768c35.413333 0 64-20.650667 64-55.978667V170.581333A63.978667 63.978667 0 0 0 853.333333 106.666667H170.666667C135.253333 106.666667 106.666667 135.253333 106.666667 170.581333v541.44C106.666667 747.285333 135.338667 768 170.666667 768h201.173333l110.016 117.44a42.752 42.752 0 0 0 60.586667 0.042667L651.904 768H853.333333z m-219.029333-42.666667h-6.250667l-115.797333 129.962667c-0.106667 0.106667-116.010667-129.962667-116.010667-129.962667H170.666667c-11.776 0-21.333333-1.621333-21.333334-13.312V170.581333A21.205333 21.205333 0 0 1 170.666667 149.333333h682.666666c11.776 0 21.333333 9.536 21.333334 21.248v541.44c0 11.754667-9.472 13.312-21.333334 13.312H634.304zM341.333333 490.666667a42.666667 42.666667 0 1 0 0-85.333334 42.666667 42.666667 0 0 0 0 85.333334z m170.666667 0a42.666667 42.666667 0 1 0 0-85.333334 42.666667 42.666667 0 0 0 0 85.333334z m170.666667 0a42.666667 42.666667 0 1 0 0-85.333334 42.666667 42.666667 0 0 0 0 85.333334z"
                        fill="#3D3D3D"
                        p-id="6432"
                      ></path>
                    </svg>
                    <span th:text="${moment.stats.approvedComment}"> </span>
                  </div>
                  <div>
                    <svg
                      t="1704877046892"
                      class="icon"
                      viewBox="0 0 1024 1024"
                      version="1.1"
                      xmlns="http://www.w3.org/2000/svg"
                      p-id="9486"
                      id="mx_n_1704877046893"
                      width="16"
                      height="16"
                    >
                      <path
                        d="M827.871087 196.128913C743.498468 111.756293 631.321596 65.290005 512 65.290005c-119.319549 0-231.499491 46.465265-315.871087 130.837884S65.290005 392.680451 65.290005 512s46.465265 231.499491 130.837884 315.871087 196.551538 130.837884 315.871087 130.837884c119.321596 0 231.499491-46.465265 315.871087-130.837884S958.708971 631.319549 958.708971 512 912.243707 280.500509 827.871087 196.128913zM531.556405 917.246651l0-74.145697c0-11.31572-9.174963-20.491707-20.491707-20.491707-11.316743 0-20.491707 9.174963-20.491707 20.491707l0 74.059739C283.276738 906.322857 116.693746 739.164766 106.755396 531.634176l72.351841 0c11.31572 0 20.491707-9.174963 20.491707-20.491707 0-11.31572-9.174963-20.491707-20.491707-20.491707l-72.273047 0c10.769274-206.737528 177.01253-373.005342 383.740848-383.813502l0 72.346725c0 11.316743 9.174963 20.491707 20.491707 20.491707 11.31572 0 20.491707-9.17394 20.491707-20.491707L531.558451 106.752326c207.593012 9.901511 374.807385 176.539762 385.609405 383.89946l-74.142627 0c-11.316743 0-20.491707 9.174963-20.491707 20.491707 0 11.316743 9.174963 20.491707 20.491707 20.491707l74.220399 0C907.275555 739.78796 739.720422 907.317511 531.556405 917.246651z"
                        fill="#cdcdcd"
                        p-id="9487"
                      ></path>
                      <path
                        d="M532.098757 503.118726 532.098757 258.240529c0-11.316743-9.174963-20.491707-20.491707-20.491707-11.31572 0-20.491707 9.17394-20.491707 20.491707l0 254.66612c0 7.858992 4.429893 14.677281 10.924817 18.114566L693.447539 722.42757c4.002151 4.000104 9.245572 6.001691 14.490016 6.001691s10.487865-2.001587 14.490016-6.001691c8.002254-8.002254 8.002254-20.977777 0-28.980032L532.098757 503.118726z"
                        fill="#cdcdcd"
                        p-id="9488"
                      ></path>
                    </svg>
                    <span th:text="${#dates.format(moment.spec.releaseTime,'yyyy-MM-dd HH:mm:ss')}"> </span>
                  </div>
                </div>
                <div class="comment_card" th:if="${haloCommentEnabled}" th:id="'comment_'+${moment.metadata.name}">
                  <halo:comment
                    group="moment.halo.run"
                    kind="Moment"
                    th:attr="name=${moment.metadata.name}"
                    colorScheme="document.documentElement.dataset.colorScheme"
                  />
                </div>
              </div>
            </li>
          </th:block>
        </ul>
      </div>
      <div class="page-bar">
        <th:block th:if="${moments.hasPrevious()} or ${moments.hasNext()}">
          <div>
            <a th:if="${moments.hasPrevious()}" th:href="@{${moments.prevUrl}}"> 上一页 </a>
          </div>
          <div>
            <a th:if="${moments.hasNext()}" th:href="@{${moments.nextUrl}}"> 下一页 </a>
          </div>
        </th:block>
      </div>
    </div>
  </th:block>
</html>
